<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace: 해당 mapper파일의 고유한 별칭 -->

<mapper namespace="memberMapper">
  <resultMap type="Member" id="memberResultSet">
  	<!--<result column="테이블 컬럼명" property="객체의 필드명"/>-->
  	<result column="USER_NO" property="userNo"/>
  	<result column="USER_NAME" property="userName"/>
  	<result column="USER_ID" property="userId"/>
  	<result column="USER_PWD" property="userPwd"/>
  	<result column="TEL" property="tel"/>
  	<result column="EMAIL" property="email"/>
  	<result column="ADDRESS" property="address"/>
  	<result column="BIRTHDAY" property="birthday"/>
  	<result column="GENDER" property="gender"/>
  	<result column="ENROLL_DATE" property="enrollDate"/>
  	<result column="MODIFY_DATE" property="modifyDate"/>
  	<result column="STATUS" property="status"/>
  </resultMap>


  <!-- 
  		*SELECT문 전송시
  		<select id="각sql문의 식별자" [parameterType="전달받을 자바타입"] resultMap="결과객체" | resultType="결과타입">
  		</select>
   -->
  <select id="loginMember" parameterType="Member" resultMap="memberResultSet">
    SELECT USER_NO,
    	   USER_NAME,
		   USER_ID,
		   USER_PWD,
		   TEL,
		   ADDRESS,
		   BIRTHDAY,
		   GENDER,
		   ENROLL_DATE,
		   MODIFY_DATE,
		   STATUS
	 FROM TB_MEMBER
	WHERE USER_ID = #{userId}
	  AND USER_PWD = #{userPwd}
	  AND STATUS = 'Y'
  </select>
  <!-- 
  		*DML문 일 경우 
  		<insert | update | delete id = "식별자" [parameterType="전달받을 자바타입"]>		
  -->
 <insert id="insertMember" parameterType="Member">
   INSERT 
   INTO TB_MEMBER
   (
      USER_NO, 
      USER_NAME,
      USER_ID,
      USER_PWD,
      TEL,
      ADDRESS,
      BIRTHDAY,
      GENDER
   )
   VALUES
   (
      SEQ_UNO.NEXTVAL,
      #{userName},
      #{userId},
      #{userPwd},
      #{tel},
      #{address},
      #{birthday},
      #{gender}
   )
</insert>
<select id="searchidMember" parameterType="Member" resultMap="memberResultSet">
		SELECT USER_ID
		FROM TB_MEMBER
		WHERE USER_NAME = #{userName}
		  AND USER_PWD = #{userPwd}
</select>
<select id="searchpwdMember" parameterType="Member" resultMap="memberResultSet">
		SELECT USER_PWD
		FROM TB_MEMBER
		WHERE USER_NAME = #{userName}
		  AND USER_ID = #{userId}
</select>
<update id="updateMember" parameterType="Member"> UPDATE TB_MEMBER SET USER_NAME = #{userName}, USER_PWD = #{userPwd}, TEL = #{tel}, ADDRESS = #{address}, MODIFY_DATE = SYSDATE WHERE USER_ID = #{userId} </update>
</mapper>